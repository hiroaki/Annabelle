<%= users_frame('users.edit.profile') do %>
  <%= form_for(@user, url: update_profile_path, html: { method: :patch, class: "space-y-6", data: { turbo: false } }) do |f| %>
    <%= render "shared/error_messages", resource: @user %>

    <div class="mb-6">
      <%= f.label :username, t('users.edit.username'), class: "block mb-2 text-sm font-medium text-gray-900" %>
      <%= f.text_field :username, autofocus: true, autocomplete: "username", class: "bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" %>
    </div>

    <div class="mb-6">
      <%= f.label :preferred_language, class: "block mb-2 text-sm font-medium text-gray-900" %>
      <% locale_options = LocaleConfiguration.available_locales.map { |locale| [LocaleConfiguration.locale_native_name(locale), locale.to_s] } %>
      <%=
        f.select :preferred_language,
          options_for_select(locale_options, f.object.preferred_language),
          { include_blank: t('users.edit.use_browser_language') },
          class: "bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",
          **data_with_testid('account-preferred-language')
      %>
      <p class="mt-2 text-sm text-gray-500">
        <%= t('users.edit.preferred_language_help') %>
      </p>
    </div>

    <div class="mb-6">
      <h2 class="text-base font-semibold text-gray-900 mb-2"><%= t('users.edit.image_privacy_heading') %></h2>
      <p class="text-sm text-gray-500 mb-4"><%= t('users.edit.image_privacy_description') %></p>
      <div class="space-y-4">
        <label class="flex items-start gap-3">
          <%= f.check_box :default_strip_metadata, class: 'mt-1 h-4 w-4 text-blue-600 border-gray-300 rounded' %>
          <span class="text-sm text-gray-900">
            <span class="font-medium block"><%= t('users.edit.default_strip_metadata_label') %></span>
            <span class="text-gray-600"><%= t('users.edit.default_strip_metadata_help') %></span>
          </span>
        </label>

        <label class="flex items-start gap-3">
          <%= f.check_box :default_allow_location_public, class: 'mt-1 h-4 w-4 text-blue-600 border-gray-300 rounded' %>
          <span class="text-sm text-gray-900">
            <span class="font-medium block"><%= t('users.edit.default_allow_location_public_label') %></span>
            <span class="text-gray-600"><%= t('users.edit.default_allow_location_public_help') %></span>
          </span>
        </label>

        <label class="flex items-start gap-3">
          <%= f.check_box :show_image_location_on_preview, class: 'mt-1 h-4 w-4 text-blue-600 border-gray-300 rounded' %>
          <span class="text-sm text-gray-900">
            <span class="font-medium block"><%= t('users.edit.show_image_location_on_preview_label') %></span>
            <span class="text-gray-600"><%= t('users.edit.show_image_location_on_preview_help') %></span>
          </span>
        </label>
      </div>
    </div>

    <div class="flex items-center justify-between">
      <%= f.submit t('users.edit.update'), class: "text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center" %>
    </div>

  <% end %>
<% end %>
