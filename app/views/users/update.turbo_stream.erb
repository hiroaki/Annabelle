<% if @requires_full_page_reload_to %>
  <%# ロケールが変更された時はページ全体を書き換えます %>
  <%= turbo_stream.replace 'devise' do %>
    <script>
      Turbo.visit("<%= @requires_full_page_reload_to %>");
    </script>
  <% end %>
<% else %>
  <%# id="devise" は <turbo-frame> です、 edit からの turbo frame による置き換えと等しくなるように処理します %>
  <%= turbo_stream.replace 'devise', partial: 'users/edit', locals: { user: @user } %>

  <%= turbo_stream.update CurrentUserPresenter.username_display_dom_id do %>
    <%= @user.username %>
  <% end %>
<% end %>
